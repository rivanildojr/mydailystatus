{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect } from \"react\";\nimport router from \"next/router\";\nimport auth0 from \"../lib/auth0\";\nimport { db } from \"../lib/db\";\n\nconst App = props => {\n  useEffect(() => {\n    if (!props.isAuth) {\n      router.push(\"/\");\n    } else if (props.forceCreate) {\n      router.push(\"/create-status\");\n    }\n  });\n\n  if (!props.isAuth || props.forceCreate) {\n    return null;\n  }\n\n  return __jsx(\"div\", null, __jsx(\"h1\", null, \"App\"), __jsx(\"pre\", null, JSON.stringify(props, null, 2)));\n};\n\nexport default App;\nexport async function getServerSideProps({\n  req,\n  res\n}) {\n  const session = await auth0.getSession(req);\n\n  if (session) {\n    const todayChekin = await db.collection(\"markers\").doc(\"2020-04-12\").collection(\"checks\").doc(session.user.sub).get();\n    const todaysData = todayChekin.data();\n    let forceCreate = true;\n\n    if (todaysData) {\n      forceCreate = false;\n    }\n\n    return {\n      props: {\n        isAuth: true,\n        user: session.user,\n        forceCreate\n      }\n    };\n  }\n\n  return {\n    props: {\n      isAuth: false,\n      user: {},\n      forceCreate\n    }\n  };\n}","map":null,"metadata":{},"sourceType":"module"}